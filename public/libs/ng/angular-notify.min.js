angular.module("cgNotify",[]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(e,n,t,a,i){var s=10,o=15,r=1e4,c="",l="center",p=document.body,g=0,m=[],f=[],u=function(u){"object"!=typeof u&&(u={message:u}),u.duration=u.duration?u.duration:r,u.templateUrl=u.templateUrl?u.templateUrl:c,u.container=u.container?u.container:p,u.classes=u.classes?u.classes:"";var d=u.scope?u.scope.$new():i.$new();if(d.$position=u.position?u.position:l,d.$message=u.message,d.$classes=u.classes,d.$templateUrl=u.templateUrl,d.$messageTemplate=u.messageTemplate,g>0)for(var y=f.length+1-g,$=0;y>$;$++)f[$].$close();n.get(u.templateUrl,{cache:a}).success(function(n){var a=t(n)(d);if(a.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(e){("opacity"===e.propertyName||0===e.currentTarget.style.opacity||e.originalEvent&&"opacity"===e.originalEvent.propertyName)&&(a.remove(),m.splice(m.indexOf(a),1),f.splice(f.indexOf(d),1),c())}),u.messageTemplate){for(var i,r=0;r<a.children().length;r++)if(angular.element(a.children()[r]).hasClass("cg-notify-message-template")){i=angular.element(a.children()[r]);break}if(!i)throw new Error("cgNotify could not find the .cg-notify-message-template element in "+u.templateUrl+".");i.append(t(u.messageTemplate)(d))}angular.element(u.container).append(a),m.push(a),"center"===d.$position&&e(function(){d.$centerMargin="-"+a[0].offsetWidth/2+"px"}),d.$close=function(){a.css("opacity",0).attr("data-closing","true"),c()};var c=function(){for(var e=0,n=s,t=m.length-1;t>=0;t--){var a=10,i=m[t],r=i[0].offsetHeight,c=n+r+a;i.attr("data-closing")?c+=20:n+=r+o,i.css("top",c+"px").css("margin-top","-"+(r+a)+"px").css("visibility","visible"),e++}};e(function(){c()}),u.duration>0&&e(function(){d.$close()},u.duration)}).error(function(e){throw new Error("Template specified for cgNotify ("+u.templateUrl+") could not be loaded. "+e)});var h={};return h.close=function(){d.$close&&d.$close()},Object.defineProperty(h,"message",{get:function(){return d.$message},set:function(e){d.$message=e}}),f.push(d),h};return u.config=function(e){s=angular.isUndefined(e.startTop)?s:e.startTop,o=angular.isUndefined(e.verticalSpacing)?o:e.verticalSpacing,r=angular.isUndefined(e.duration)?r:e.duration,c=e.templateUrl?e.templateUrl:c,l=angular.isUndefined(e.position)?l:e.position,p=e.container?e.container:p,g=e.maximumOpen?e.maximumOpen:g},u.closeAll=function(){for(var e=m.length-1;e>=0;e--){var n=m[e];n.css("opacity",0)}},u}]),angular.module("cgNotify").run(["$templateCache",function(e){"use strict";e.put("/notify.html","<div class=\"cg-notify-message\" ng-class=\"[$classes, \n    $position === 'center' ? 'cg-notify-message-center' : '',\n    $position === 'left' ? 'cg-notify-message-left' : '',\n    $position === 'right' ? 'cg-notify-message-right' : '']\"\n    ng-style=\"{'margin-left': $centerMargin}\">\n\n    <div ng-show=\"!$messageTemplate\">\n        {{$message}}\n    </div>\n\n"+'    <div ng-show="$messageTemplate" class="cg-notify-message-template">\n        \n    </div>\n\n    <button type="button" class="cg-notify-close" ng-click="$close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="cg-notify-sr-only">Close</span>\n    </button>\n\n</div>')}]);