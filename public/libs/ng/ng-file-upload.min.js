!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(n,t){if("__setXHR_"===n){var r=t(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="6.0.2",ngFileUpload.defaults={},ngFileUpload.service("Upload",["$http","$q","$timeout",function(e,n,t){function r(r){r.method=r.method||"POST",r.headers=r.headers||{};var i=n.defer(),a=i.promise;return r.headers.__setXHR_=function(){return function(e){e&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=r,i.notify?i.notify(e):a.progressFunc&&t(function(){a.progressFunc(e)})},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=r,i.notify?i.notify(e):a.progressFunc&&t(function(){a.progressFunc(e)}))},!1))}},e(r).then(function(e){i.resolve(e)},function(e){i.reject(e)},function(e){i.notify(e)}),a.success=function(e){return a.then(function(n){e(n.data,n.status,n.headers,r)}),a},a.error=function(e){return a.then(null,function(n){e(n.data,n.status,n.headers,r)}),a},a.progress=function(e){return a.progressFunc=e,a.then(null,null,function(n){e(n)}),a},a.abort=function(){return r.__XHR&&t(function(){r.__XHR.abort()}),a},a.xhr=function(e){return r.xhrFn=function(n){return function(){n&&n.apply(a,arguments),e.apply(a,arguments)}}(r.xhrFn),a},a}this.upload=function(e){function n(t,r,i){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))t.append(i,r);else if("form"===e.sendFieldsAs)if(angular.isObject(r))for(var a in r)r.hasOwnProperty(a)&&n(t,r[a],i+"["+a+"]");else t.append(i,r);else r=angular.isString(r)?r:JSON.stringify(r),"json-blob"===e.sendFieldsAs?t.append(i,new Blob([r],{type:"application/json"})):t.append(i,r)}return e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var r,i=new FormData,a={};for(r in e.fields)e.fields.hasOwnProperty(r)&&(a[r]=e.fields[r]);t&&(a.data=t);for(r in a)if(a.hasOwnProperty(r)){var l=a[r];e.formDataAppender?e.formDataAppender(i,r,l):n(i,l,r)}if(null!=e.file){var o=e.fileFormDataName||"file";if(angular.isArray(e.file))for(var f=angular.isString(o),u=0;u<e.file.length;u++)i.append(f?o:o[u],e.file[u],e.fileName&&e.fileName[u]||e.file[u].name);else i.append(o,e.file,e.fileName||e.file.name)}return i}),r(e)},this.http=function(n){return n.transformRequest=n.transformRequest||function(n){return window.ArrayBuffer&&n instanceof window.ArrayBuffer||n instanceof Blob?n:e.defaults.transformRequest[0](arguments)},r(n)},this.dataUrl=function(e,n,r){window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)?t(function(){var i=window.URL||window.webkitURL;if(i&&i.createObjectURL&&!r)n(i.createObjectURL(e));else{var a=new FileReader;a.readAsDataURL(e),a.onload=function(e){t(function(){n(e.target.result)})}}}):n(null)},this.setDefaults=function(e){ngFileUpload.defaults=e||{}}}]),function(){function e(e,a,l,o,f,u,s){function c(){return"input"===a[0].tagName.toLowerCase()&&l.type&&"file"===l.type.toLowerCase()}function d(n){if(!F){F=!0;try{for(var a=n.__files_||n.target&&n.target.files,s=[],c=[],d=0;d<a.length;d++){var g=a.item(d);r(e,f,l,g,n)?s.push(g):c.push(g)}i(f,u,e,o,l,t(l,"ngfChange")||t(l,"ngfSelect"),s,c,n),0===s.length&&(n.target.value=s)}finally{F=!1}}}function g(n){t(l,"ngfMultiple")&&n.attr("multiple",f(t(l,"ngfMultiple"))(e)),t(l,"ngfCapture")&&n.attr("capture",f(t(l,"ngfCapture"))(e)),t(l,"accept")&&n.attr("accept",t(l,"accept"));for(var r=0;r<a[0].attributes.length;r++){var i=a[0].attributes[r];(c()&&"type"!==i.name||"type"!==i.name&&"class"!==i.name&&"id"!==i.name&&"style"!==i.name)&&((null==i.value||""===i.value)&&("required"===i.name&&(i.value="required"),"multiple"===i.name&&(i.value="multiple")),n.attr(i.name,i.value))}}function p(n,t){if(!t&&(n||c()))return a.$$ngfRefElem||a;var r=angular.element('<input type="file">');return g(r),c()?(a.replaceWith(r),a=r,r.attr("__ngf_gen__",!0),s(a)(e)):(r.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("z-index","-100000").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),a.$$ngfRefElem&&a.$$ngfRefElem.remove(),a.$$ngfRefElem=r,document.body.appendChild(r[0])),r}function v(n){i(f,u,e,o,l,t(l,"ngfChange")||t(l,"ngfSelect"),[],[],n,!0)}function h(r){function i(e){e&&e.clientY>0&&s[0].click(),!c()&&e||!u||a.bind("click touchend touchstart",h)}if(a.attr("disabled")||m)return!1;if(null!=r){if("touchstart"===r.type)return w=r.originalEvent.touches[0].clientY,!0;if(r.stopPropagation(),r.preventDefault(),"touchend"===r.type){var o=r.originalEvent.changedTouches[0].clientY;if(Math.abs(o-w)>20)return!1}}var u=f(t(l,"ngfResetOnClick"))(e)!==!1,s=p(r,u);return s&&((!r||u)&&s.bind("change",d),r&&u&&f(t(l,"ngfResetModelOnClick"))(e)!==!1&&v(r),n(navigator.userAgent)?setTimeout(function(){i(r)},0):i(r)),!1}if(!a.attr("__ngf_gen__")){e.$on("$destroy",function(){a.$$ngfRefElem&&a.$$ngfRefElem.remove()});var m=!1;-1===t(l,"ngfSelect").search(/\W+$files\W+/)&&e.$watch(t(l,"ngfSelect"),function(e){m=e===!1});var F=!1,w=0;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(a,p,g,d):h()}}function n(e){var n=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(n&&n.length>2){var t=ngFileUpload.defaults.androidFixMinorVersion||4;return parseInt(n[1])<4||parseInt(n[1])===t&&parseInt(n[2])<t}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}ngFileUpload.getAttrWithDefaults=function(e,n){return null!=e[n]?e[n]:null==ngFileUpload.defaults[n]?ngFileUpload.defaults[n]:ngFileUpload.defaults[n].toString()};var t=ngFileUpload.getAttrWithDefaults;ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile",function(n,t,r){return{restrict:"AEC",require:"?ngModel",link:function(i,a,l,o){e(i,a,l,o,n,t,r)}}}]),ngFileUpload.validate=function(e,n,r,i,a){function l(e){if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])return e.substring(1,e.length-1);var n=e.split(","),t="";if(n.length>1)for(var r=0;r<n.length;r++)t+="("+l(n[r])+")",r<n.length-1&&(t+="|");else 0===e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,".");return t}if(null==i)return!1;var o=n(t(r,"ngfAccept"))(e,{$file:i,$event:a}),f=n(t(r,"ngfMaxSize"))(e,{$file:i,$event:a})||9007199254740991,u=n(t(r,"ngfMinSize"))(e,{$file:i,$event:a})||-1;if(null!=o&&angular.isString(o)){var s=new RegExp(l(o),"gi");if(o=null!=i.type&&s.test(i.type.toLowerCase())||null!=i.name&&s.test(i.name.toLowerCase()),!o)return i.$error="accept",!1}else if(o===!1)return i.$error="accept",!1;return null==i.size?!0:i.size>f?(i.$error="maxSize",!1):i.size<u?(i.$error="minSize",!1):!0},ngFileUpload.updateModel=function(e,n,r,i,a,l,o,f,u,s){function c(){var s=e(t(a,"ngfKeep"))(r);if(s===!0){var c=(i.$modelValue||[]).slice(0);if(o&&o.length)if(e(t(a,"ngfKeepDistinct"))(r)===!0){for(var d=c.length,g=0;g<o.length;g++){for(var p=0;d>p&&o[g].name!==c[p].name;p++);p===d&&c.push(o[g])}o=c}else o=c.concat(o);else o=c}var v=o&&o.length?o[0]:null;if(i){var h=!e(t(a,"ngfMultiple"))(r)&&!t(a,"multiple")&&!s;e(t(a,"ngModel")).assign(r,h?v:o),n(function(){i&&i.$setViewValue(h?v:null!=o&&0===o.length?null:o)})}var m=t(a,"ngfModel");m&&e(m).assign(r,o),t(a,"ngModelRejected")&&e(t(a,"ngModelRejected")).assign(r,f),l&&e(l)(r,{$files:o,$file:v,$rejectedFiles:f,$event:u})}s?c():n(function(){c()})};var r=ngFileUpload.validate,i=ngFileUpload.updateModel}(),function(){function e(e,a,l,o,f,u,s){function c(e,n,r){var a=!0,l=r.dataTransfer.items;if(null!=l)for(var o=0;o<l.length&&a;o++)a=a&&("file"===l[o].kind||""===l[o].kind)&&t(e,f,n,l[o],r);var u=f(i(n,"ngfDragOverClass"))(e,{$event:r});return u&&(u.delay&&(F=u.delay),u.accept&&(u=a?u.accept:u.reject)),u||i(n,"ngfDragOverClass")||"dragover"}function d(n,r,i,a){function o(r){t(e,f,l,r,n)?d.push(r):g.push(r)}function c(e,n,t){if(null!=n)if(n.isDirectory){var r=(t||"")+n.name;o({name:n.name,type:"directory",path:r});var i=n.createReader(),a=[];v++;var l=function(){i.readEntries(function(r){try{if(r.length)a=a.concat(Array.prototype.slice.call(r||[],0)),l();else{for(var i=0;i<a.length;i++)c(e,a[i],(t?t:"")+n.name+"/");v--}}catch(o){v--,console.error(o)}},function(){v--})};l()}else v++,n.file(function(e){try{v--,e.path=(t?t:"")+e.name,o(e)}catch(n){v--,console.error(n)}},function(){v--})}var d=[],g=[],p=n.dataTransfer.items,v=0;if(p&&p.length>0&&"file"!==s.protocol())for(var h=0;h<p.length;h++){if(p[h].webkitGetAsEntry&&p[h].webkitGetAsEntry()&&p[h].webkitGetAsEntry().isDirectory){var m=p[h].webkitGetAsEntry();if(m.isDirectory&&!i)continue;null!=m&&c(d,m)}else{var F=p[h].getAsFile();null!=F&&o(F)}if(!a&&d.length>0)break}else{var w=n.dataTransfer.files;if(null!=w)for(var y=0;y<w.length&&(o(w.item(y)),a||!(d.length>0));y++);}var $=0;!function A(e){u(function(){if(v)10*$++<2e4&&A(10);else{if(!a&&d.length>1){for(h=0;"directory"===d[h].type;)h++;d=[d[h]]}r(d,g)}},e||0)}()}var g=n();if(i(l,"dropAvailable")&&u(function(){e[i(l,"dropAvailable")]?e[i(l,"dropAvailable")].value=g:e[i(l,"dropAvailable")]=g}),!g)return void(f(i(l,"ngfHideOnDropNotAvailable"))(e)===!0&&a.css("display","none"));var p=!1;-1===i(l,"ngfDrop").search(/\W+$files\W+/)&&e.$watch(i(l,"ngfDrop"),function(e){p=e===!1});var v,h=null,m=f(i(l,"ngfStopPropagation")),F=1;a[0].addEventListener("dragover",function(n){if(!a.attr("disabled")&&!p){if(n.preventDefault(),m(e)&&n.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var t=n.dataTransfer.effectAllowed;n.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy"}u.cancel(h),e.actualDragOverClass||(v=c(e,l,n)),a.addClass(v)}},!1),a[0].addEventListener("dragenter",function(n){a.attr("disabled")||p||(n.preventDefault(),m(e)&&n.stopPropagation())},!1),a[0].addEventListener("dragleave",function(){a.attr("disabled")||p||(h=u(function(){a.removeClass(v),v=null},F||1))},!1),a[0].addEventListener("drop",function(n){a.attr("disabled")||p||(n.preventDefault(),m(e)&&n.stopPropagation(),a.removeClass(v),v=null,d(n,function(t,a){r(f,u,e,o,l,i(l,"ngfChange")||i(l,"ngfDrop"),t,a,n)},f(i(l,"ngfAllowDir"))(e)!==!1,i(l,"multiple")||f(i(l,"ngfMultiple"))(e)))},!1)}function n(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e}var t=ngFileUpload.validate,r=ngFileUpload.updateModel,i=ngFileUpload.getAttrWithDefaults;ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location",function(n,t,r){return{restrict:"AEC",require:"?ngModel",link:function(i,a,l,o){e(i,a,l,o,n,t,r)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,t){n()&&t.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout",function(e,t){return function(r,a,l){if(n()){var o=e(i(l,"ngfDropAvailable"));t(function(){o(r),o.assign&&o.assign(r,!0)})}}}])}(),function(){function e(e,n,t,r,i,a,l){n.$watch(i,function(i){angular.isString(i)?l(i):window.FileReader&&ngFileUpload.validate(n,t,r,i,null)&&e.dataUrl(i,function(e){l?l(e):i.dataUrl=e||t(a)(n)},t(r.ngfNoObjectUrl)(n))})}ngFileUpload.directive("ngfSrc",["$parse","Upload",function(n,t){return{restrict:"AE",link:function(r,i,a){e(t,r,n,a,a.ngfSrc,a.ngfDefaultSrc,function(e){i.attr("src",e)})}}}]),ngFileUpload.directive("ngfBackground",["$parse","Upload",function(n,t){return{restrict:"AE",link:function(r,i,a){e(t,r,n,a,a.ngfBackground,a.ngfDefaultBackground,function(e){i.css("background-image","url("+e+")")})}}}]),ngFileUpload.directive("ngfDataUrl",["$parse","Upload",function(n,t){return{restrict:"AE",link:function(r,i,a){e(t,r,n,a,a.ngfDataUrl,a.ngfDefaultDataUrl)}}}])}();