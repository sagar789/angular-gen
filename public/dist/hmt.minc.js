/*! hmt 14-02-2017 */
"use strict";var myApp=angular.module("myApp",["ui.router","ngStorage","cgNotify","ngFileUpload","angularUtils.directives.dirPagination","angucomplete"]);myApp.config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function($stateProvider,$urlRouterProvider,$locationProvider,$httpProvider){$httpProvider.defaults.headers.get||($httpProvider.defaults.headers.get={}),$httpProvider.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",$httpProvider.defaults.headers.get["Cache-Control"]="no-cache",$httpProvider.defaults.headers.get.Pragma="no-cache",$locationProvider.html5Mode({enabled:!0,requireBase:!1}),$locationProvider.hashPrefix("!"),$urlRouterProvider.otherwise("/page_not_found"),$stateProvider.state("home",{url:"/",views:{middle:{templateUrl:"front/views/main/main.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService){$rootScope.activePricing=!1,$rootScope.activeHelp=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1}}}).state("register",{url:"/register",views:{middle:{templateUrl:"front/views/user/signup.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,$stateParams,$window){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!1,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!0}}}).state("login",{url:"/login",views:{middle:{templateUrl:"front/views/user/login.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function(AuthService,$state,$location){AuthService.isLoggedIn()?console.log("assasa"):console.log("oioioi")}}}).state("profile",{url:"/profile",views:{middle:{templateUrl:"front/views/user/profile.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService,$window){$rootScope.propShow=!1,AuthService.isLoggedIn()||($window.location.href="/")}}}).state("verify",{url:"/verify?access_token",resolve:{check:function($stateParams,$window,$http,Notify,$state){$stateParams.access_token&&""!=$stateParams.access_token&&"true"!=$stateParams.access_token?$http.post("/api/user/getByToken",{token:$stateParams.access_token}).success(function(res){Notify.showNotification(res.message),$state.go("home")}).error(function(err){console.log("111111"),console.log(err),$window.location.href="/invalid_token"}):$window.location.href="/page-not-found"}}}).state("resetPassword",{url:"/reset_password?token",views:{middle:{templateUrl:"front/views/user/reset_password.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,$state,$stateParams,$window,$http,Notify){$rootScope.showMiddle=!1,$stateParams.token&&"true"!=$stateParams.token?$http.post("/api/user/check_reset_password_token",{token:$stateParams.token}).then(function(res){console.log("done")},function(err){$rootScope.showLoading=!1,2==err.data.status?(Notify.showNotification(err.data.error.error_message,"error-class"),$state.go("home")):3==err.data.status?$window.location.href="/invalid_token":Notify.showNotification(err.data.error.error_message,"error-class")}):$window.location.href="/page_not_found"}}}).state("termsCondition",{url:"/terms-and-condition{slash:[/]{0,1}}",views:{middle:{templateUrl:"front/views/main/term_and_cond_detail.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService){$rootScope.activetc=!0,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1}}}).state("privacyPolicy",{url:"/privacy-policy{slash:[/]{0,1}}",views:{middle:{templateUrl:"front/views/main/privacy_policay.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService){AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1}}}).state("ourStory",{url:"/our_story{slash:[/]{0,1}}",views:{middle:{templateUrl:"front/views/main/our_story.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService){AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1}}}).state("pricing",{url:"/pricing{slash:[/]{0,1}}",views:{middle:{templateUrl:"front/views/main/pricing.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService){$rootScope.activePricing=!0,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!1,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1}}}).state("renterinfo",{url:"/renter{slash:[/]{0,1}}",views:{middle:{templateUrl:"front/views/main/renter_info.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!0,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1}}}).state("ownerinfo",{url:"/owner{slash:[/]{0,1}}",views:{middle:{templateUrl:"front/views/main/owner_info.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeOwnerInfo=!0,$rootScope.activeHelp=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1}}}).state("contactus",{url:"/contact-us{slash:[/]{0,1}}",views:{middle:{templateUrl:"front/views/main/contact.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeOwnerInfo=!1,$rootScope.activeHelp=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1}}}).state("help",{url:"/help",views:{middle:{templateUrl:"front/views/main/help.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeOwnerInfo=!1,$rootScope.activeHelp=!0,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1}}}).state("faqListing",{url:"/faq_details?Id",views:{middle:{templateUrl:"front/views/main/faq_listing.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService,$stateParams,$window){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!0,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1,angular.isUndefined($stateParams.Id)===!0&&($window.location.href="/help")}}}).state("helpRenterDetail",{url:"/renter_guide?Id",views:{middle:{templateUrl:"front/views/main/help_detail_renter.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService,$stateParams,$window){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!0,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1,angular.isUndefined($stateParams.Id)===!0&&($window.location.href="/help")}}}).state("helpOwnerDetail",{url:"/owner_guide?Id",views:{middle:{templateUrl:"front/views/main/help_detail_owner.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService,$stateParams,$window){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!0,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1,angular.isUndefined($stateParams.Id)===!0&&($window.location.href="/help")}}}).state("helpPoliciesDetail",{url:"/plocies_guide?Id",views:{middle:{templateUrl:"front/views/main/help_detail_policies.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService,$stateParams,$window){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!0,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1,angular.isUndefined($stateParams.Id)===!0&&($window.location.href="/help")}}}).state("helpcat",{url:"/renter_category?Id",views:{middle:{templateUrl:"front/views/main/help_cat.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService,$stateParams,$window){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!0,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1,angular.isUndefined($stateParams.Id)===!0&&($window.location.href="/help")}}}).state("helpQuescat",{url:"/renter_answer_category?Id",views:{middle:{templateUrl:"front/views/main/help_sin_ans.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService,$stateParams,$window){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!0,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1,angular.isUndefined($stateParams.Id)===!0&&($window.location.href="/help")}}}).state("helpanscat",{url:"/renter_answer?Id",views:{middle:{templateUrl:"front/views/main/help_answer.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService,$stateParams,$window){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!0,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1,angular.isUndefined($stateParams.Id)===!0&&($window.location.href="/help")}}}).state("helallQWA",{url:"/renter_question?Id",views:{middle:{templateUrl:"front/views/main/help_question_list.html"},header:{templateUrl:"front/views/header/header.html"},footer:{templateUrl:"front/views/footer/footer.html"}},resolve:{check:function($rootScope,AuthService,$stateParams,$window){$rootScope.activePricing=!1,$rootScope.activeRenetInfo=!1,$rootScope.activeHelp=!0,$rootScope.activeOwnerInfo=!1,$rootScope.activeRegister=!1,AuthService.isLoggedIn()?$rootScope.propShow=!0:$rootScope.propShow=!1,angular.isUndefined($stateParams.Id)===!0&&($window.location.href="/help")}}}).state("invalidToken",{url:"/invalid_token",views:{middle:{templateUrl:"front/invalidtoken.html"},footer:{templateUrl:"front/views/footer/footer.html"}}}).state("notFound",{url:"/page_not_found",views:{middle:{templateUrl:"front/notfound.html"},footer:{templateUrl:"front/views/footer/footer.html"}}})}]),myApp.run(["$rootScope","AuthService",function($rootScope,AuthService){$rootScope.currentUser=AuthService.isLoggedIn(),$rootScope.userData=AuthService.getUserDetail(),$rootScope.$on("$stateChangeStart",function(event,next,current){$rootScope.showLoading=!0}),$rootScope.$on("$stateChangeSuccess",function(event,next,current){$rootScope.showLoading=!1})}]),function(){myApp.controller("MapCtrl",["$scope","$timeout","$http","$rootScope",function($scope,$timeout,$http,$rootScope){function handleLocationError(browserHasGeolocation,infoWindow,pos){infoWindow.setPosition(pos),infoWindow.setContent(browserHasGeolocation?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}var infoWindow,location;$scope.markers=[];var cityCircle;$timeout(function(){var latlng=new google.maps.LatLng(-34.397,150.644);$scope.map=new google.maps.Map(document.getElementById("map"),{center:latlng,zoom:11,minZoom:4}),infoWindow=new google.maps.InfoWindow({map:$scope.map}),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(position){var pos={lat:position.coords.latitude,lng:position.coords.longitude};console.log(pos),infoWindow.setPosition(pos),infoWindow.setContent("Your are here"),$scope.map.setCenter(pos);var sunCircle={strokeColor:"#c3fc49",strokeOpacity:.8,strokeWeight:2,fillColor:"#c3fc49",fillOpacity:.35,map:$scope.map,center:new google.maps.LatLng(pos.lat,pos.lng),radius:16093.44};cityCircle=new google.maps.Circle(sunCircle),$http.post("/api/trailar/get_trailer_by_latlng",{lat:pos.lat,lng:pos.lng}).then(function(res){location=[],angular.forEach(res.data.data,function(key){location.push({lat:key.lat,"long":key.lng})});for(var i=0;i<location.length;i++)createMarker(location[i])},function(err){$rootScope.showLoading=!1,console.log(err)})},function(){handleLocationError(!0,infoWindow,$scope.map.getCenter())}):handleLocationError(!1,infoWindow,$scope.map.getCenter())},1e3);var createMarker=function(info){var marker=new google.maps.Marker({map:$scope.map,position:new google.maps.LatLng(info.lat,info["long"]),icon:"front/images/map-pin-img.png"});marker.content='<div class="infoWindowContent">'+info.desc+"</div>",cityCircle.bindTo("center",marker,"position"),$scope.markers.push(marker)},removeMarker=function(){infoWindow=new google.maps.InfoWindow,infoWindow.close();for(var i=0;i<$scope.markers.length;i++)$scope.markers[i].setMap(null);$scope.markers.length=0};$scope.openInfoWindow=function(e,selectedMarker){e.preventDefault(),google.maps.event.trigger(selectedMarker,"click")},$scope.showSearch=function(){if($scope.searchForm.$valid){var geocoder=new google.maps.Geocoder,address=$scope.searchAddress;geocoder.geocode({address:address},function(results,status){removeMarker();var newLat=results[0].geometry.location.lat(),newLng=results[0].geometry.location.lng();$scope.map.setCenter({lat:newLat,lng:newLng}),status==google.maps.GeocoderStatus.OK&&$http.post("/api/trailar/get_trailer_by_latlng",{lat:newLat,lng:newLng}).then(function(res){location=[],angular.forEach(res.data.data,function(key){location.push({lat:key.lat,"long":key.lng})});for(var i=0;i<location.length;i++)createMarker(location[i])},function(err){$rootScope.showLoading=!1,console.log(err)})})}else alert("Please enter location")},$scope.$on("gmPlacesAutocomplete::placeChanged",function(){var location=$scope.searchAddress.getPlace().geometry.location;$scope.lat=location.lat(),$scope.lng=location.lng(),$scope.map.setCenter({lat:$scope.lat,lng:$scope.lng}),status==google.maps.GeocoderStatus.OK&&$http.post("/api/trailar/get_trailer_by_latlng",{lat:newLat,lng:newLng}).then(function(res){location=[],angular.forEach(res.data.data,function(key){location.push({lat:key.lat,"long":key.lng})});for(var i=0;i<location.length;i++)createMarker(location[i])},function(err){$rootScope.showLoading=!1,console.log(err)})})}])}(),function(){myApp.controller("pageCtrl",["$scope","$http","Notify","$sce","$filter","$stateParams","loadAsync","$compile","$timeout","$rootScope","$state",function($scope,$http,Notify,$sce,$filter,$stateParams,loadAsync,$compile,$timeout,$rootScope,$state){$scope.selectResult=function(data){console.log(data),console.log($scope.selectedQuestion)},$scope.selectedQuestion&&console.log($scope.selectedQuestion),$scope.loadPages=function(ids){$http.post("/api/user/cms_page_by_id",{id:ids}).then(function(res){var dataPage=res.data.data.description;"null"!==dataPage?($scope.description=$sce.trustAsHtml(dataPage),$scope.lengthPage=!1):(console.log("sdsdsds"),$scope.lengthPage=!0,$scope.noData="No Data Available"),17==ids?($scope.activeHtc=!0,$scope.activeOtc=!1,$scope.activetc=!1):18==ids?($scope.activeHtc=!1,$scope.activeOtc=!0,$scope.activetc=!1):3==ids?($scope.activeHtc=!1,$scope.activeOtc=!1,$scope.activetc=!0):($scope.activeHtc=!1,$scope.activeOtc=!1,$scope.activetc=!1)},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error,"error-class")})},$scope.getHelpcatList=function(catId){console.log(catId),$http.post("/api/help/get_role_category",{cat_id:catId}).then(function(res){console.log(res.data.data),$scope.categoryList=res.data.data},function(err){$rootScope.showLoading=!1})},$scope.getHelpQcatList=function(catId){console.log(catId),$http.post("/api/help/get_q_category_link",{cat_id:catId}).then(function(res){console.log(res.data.data),$scope.qCategoryList=res.data.data},function(err){$rootScope.showLoading=!1})},$scope.getDTrailerData=function(){$http.get("/api/size/load_duration").then(function(res){$scope.userTitle="All Type List",$scope.durationOption=res.data.data,$scope.modelDuration=$scope.durationOption[0]},function(err){$rootScope.showLoading=!1}),$http.get("/api/trailar/loadDTrailer").then(function(res){$scope.dTrailerdata=[],angular.forEach(res.data.data,function(key){var desc=key.description,strDot=desc.length;if(strDot>0)var content=desc.substring(0,70);else var content=desc.substring(0,50);$scope.dTrailerdata.push({id:key.type_id,image:key.image,type_name:key.type_name,size_ids:key.size_id,description:$sce.trustAsHtml(content),caption:key.caption})}),$scope.modelType=$scope.dTrailerdata[0],$scope.getSizeData($scope.dTrailerdata[0].id,0)},function(err){Notify.showNotification(err.data.error,"error-class")})},$scope.getSizeData=function(id,index){$rootScope.showLoading=!0,$scope.modelType=$scope.dTrailerdata[index],console.log($scope.dTrailerdata),angular.forEach($scope.dTrailerdata,function(i,key){i.id===id&&($scope.sizeOption=$scope.dTrailerdata[key].size_ids,$scope.modelSize=$scope.sizeOption[1],$scope.modelType.id&&$scope.modelSize.id&&$scope.modelDuration.id?$scope.calcularDailyRate($scope.modelType,$scope.modelSize,$scope.modelDuration):($rootScope.showLoading=!1,$state.go($state.current,{},{reload:!0})))})},$scope.calcularDailyRate=function(type,size,duration){$rootScope.showLoading=!0,$("#sizeredio"+size.id).prop("checked",!0),$http.post("/api/dailyRate/calculate_daily_rate",{type:type.id,size:size.id,duration:duration.id}).then(function(res){res.data.data[0]?$scope.dailyRate=res.data.data[0].price:$scope.dailyRate=0,$rootScope.showLoading=!1},function(err){Notify.showNotification(err.data.error,"error-class")})},$scope.loadFaqDetails=function(ids){$rootScope.showLoading=!0,$http.post("/api/faq/faq_detail_by_id",{cat_id:$stateParams.Id}).then(function(res){res.data.data.length>0&&($scope.dataPage=res.data.data),$rootScope.showLoading=!1},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error,"error-class")})},$scope.loadHelpDetail=function(ids){var ids=ids||$stateParams.Id,ele=angular.element("#element");$http.get("/api/cms/loadCms").then(function(res){$scope.dataTrack=res.data.data},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error,"error-class")}),ele.html(""),loadAsync.template({view:"front/views/main/help_detail_load.html"}).then(function(res){ele.append($compile(res)($scope)),8==ids?($scope.activeOverview=!0,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):9==ids?($scope.activeOverview=!1,$scope.activeSignUp=!0,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):10==ids?($scope.activeOverview=!1,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!0,$scope.loadPages(ids)):11==ids?($scope.activeOverview=!0,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):12==ids?($scope.activeOverview=!1,$scope.activeSignUp=!0,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):13==ids?($scope.activeOverview=!1,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!0,$scope.loadPages(ids)):14==ids?($scope.activeOverview=!0,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):15==ids?($scope.activeOverview=!1,$scope.activeSignUp=!0,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):16==ids&&($scope.activeOverview=!1,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!0,$scope.loadPages(ids))})},$scope.loadTcDetail=function(ids){var ids=ids||$stateParams.Id,ele=angular.element("#element");ele.html(""),loadAsync.template({view:"front/views/main/term_and_cond_detail.html"}).then(function(res){ele.append($compile(res)($scope)),8==ids?($scope.activeOverview=!0,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):9==ids?($scope.activeOverview=!1,$scope.activeSignUp=!0,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):10==ids?($scope.activeOverview=!1,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!0,$scope.loadPages(ids)):11==ids?($scope.activeOverview=!0,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):12==ids?($scope.activeOverview=!1,$scope.activeSignUp=!0,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):13==ids?($scope.activeOverview=!1,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!0,$scope.loadPages(ids)):14==ids?($scope.activeOverview=!0,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):15==ids?($scope.activeOverview=!1,$scope.activeSignUp=!0,$scope.activeTrailerOpt=!1,$scope.loadPages(ids)):16==ids&&($scope.activeOverview=!1,$scope.activeSignUp=!1,$scope.activeTrailerOpt=!0,$scope.loadPages(ids))})},$scope.getSearchData=function(){if($scope.search.data){var ele=angular.element("#element");ele.html(""),loadAsync.template({view:"front/views/main/help_search.html"}).then(function(res){ele.append($compile(res)($scope)),$http.post("/api/faq/search_help_by_key",{key:$scope.search.data}).then(function(res){$scope.dataPage=res.data.data,console.log($scope.dataPage)},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error,"error-class")})})}},$scope.loadHelpMiddle=function(){var ele=angular.element("#element");ele.html(""),loadAsync.template({view:"front/views/main/help_middle.html"}).then(function(res){ele.append($compile(res)($scope)),$http.get("/api/cms/loadCms").then(function(res){$scope.dataTrack=res.data.data},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error,"error-class")})})},$scope.loadRenterHelp=function(id){1==id?($scope.activeReHl=!0,$scope.activeOwHl=!1):($scope.activeReHl=!1,$scope.activeOwHl=!0),$scope.loadSearchFn(),$http.post("/api/help/load_help_cus_list",{id:id}).then(function(res){var reList=res.data.data,reLength=reList.length;if(reLength>0)for(var newHelpArr=[],str=[],i=0;reLength>i;i++){var aStr=str.indexOf(reList[i].hc_id);aStr>=0?newHelpArr[aStr].data_arr.push({id:reList[i].id,question_category:reList[i].question_category}):(newHelpArr.push({hc_id:reList[i].hc_id,category_name:reList[i].category_name,data_arr:[{id:reList[i].id,question_category:reList[i].question_category}]}),str.push(reList[i].hc_id)),i==reLength-1&&($scope.reListArr=newHelpArr,$scope.helpLengthAll=newHelpArr.length,$scope.helpLength=Math.ceil(newHelpArr.length/2),console.log($scope.helpLength))}else $state.go("help")},function(err){$rootScope.showLoading=!1})},$scope.loadHelpCat=function(id){$scope.loadSearchFn(),$http.post("/api/help/load_help_single_cus_list",{id:$stateParams.Id}).then(function(res){var reList=res.data.data,reLength=reList.length;if(console.log(reList),reLength>0){$scope.catTitle=reList[0].category_name,$scope.role=reList[0].role,$scope.getHelpcatList($scope.role);var newHelpArr=[],str="";$scope.activeFunction(reList[0]);for(var i=0;reLength>i;i++){if(reList[i].hqc_id==str)for(var j=0;j<newHelpArr.length;j++)newHelpArr[j].hqc_id===str&&newHelpArr[j].data_arr.push({id:reList[i].id,question:reList[i].question});else newHelpArr.push({hqc_id:reList[i].hqc_id,slag:reList[i].slag,question_category:reList[i].question_category,data_arr:[{id:reList[i].id,question:reList[i].question}]}),str=reList[i].hqc_id;i==reLength-1&&($scope.reCatListArr=newHelpArr,$scope.helpLengthAll=newHelpArr.length,$scope.helpLength=Math.ceil(newHelpArr.length/2))}}else $state.go("help")},function(err){$rootScope.showLoading=!1})},$scope.loadHelpSinAngCat=function(id){$scope.loadSearchFn(),$http.post("/api/help/load_help_single_cas_list",{id:$stateParams.Id}).then(function(res){var reList=res.data.data,reLength=reList.length;if(reLength>0){$scope.catTitle=reList[0].category_name,console.log(reList[0]),$scope.role=reList[0].role,$scope.getHelpcatList($scope.role);var newHelpArr=[],str="";$scope.activeFunction(reList[0]);for(var i=0;reLength>i;i++){if(reList[i].hqc_id==str)for(var j=0;j<newHelpArr.length;j++)newHelpArr[j].hqc_id===str&&newHelpArr[j].data_arr.push({id:reList[i].id,question:reList[i].question});else newHelpArr.push({hqc_id:reList[i].hqc_id,question_category:reList[i].question_category,data_arr:[{id:reList[i].id,question:reList[i].question}]}),str=reList[i].hqc_id;i==reLength-1&&($scope.reCatListArr=newHelpArr)}}else $state.go("help")},function(err){$rootScope.showLoading=!1})},$scope.loadHelpAnsCat=function(id){$scope.loadSearchFn(),$http.post("/api/help/load_help_single_ans_list",{id:$stateParams.Id}).then(function(res){$scope.anscat=res.data.data[0];var lengthAtt=res.data.data[0];lengthAtt?(console.log("12121121",$scope.anscat),$scope.helpCatTitle=res.data.data[0].category_name,$scope.QCatTitle=res.data.data[0].question_category,$scope.activeQFunction(res.data.data[0].help_question_category_id),$scope.getHelpQcatList($scope.anscat.help_category_id)):$state.go("help")},function(err){$rootScope.showLoading=!1})},$scope.activeFunction=function(data){var data=data.help_category_id;$scope["act"+data]=!0},$scope.activeQFunction=function(data){$scope["act"+data]=!0},$scope.loadSearchFn=function(){$http.get("/api/help/get_all_question_list").then(function(res){$scope.questions=res.data.data},function(err){$rootScope.showLoading=!1})},$scope.loadAllQCat=function(data){$http.post("/api/help/get_question_help_all",{cat_id:$stateParams.Id}).then(function(res){console.log("2222",res.data.data),$scope.AQList=res.data.data,$scope.helpCatTitle=res.data.data[0].category_name,$scope.activeQFunction($stateParams.Id),$scope.getHelpQcatList($scope.AQList[0].help_category_id)})}}])}(),function(){myApp.controller("userCtrl",["$scope","$http","$state","AuthService","Notify","$rootScope","Upload","file","$sce","$stateParams","$localStorage","loadAsync","$compile","fileCok",function($scope,$http,$state,AuthService,Notify,$rootScope,Upload,file,$sce,$stateParams,$localStorage,loadAsync,$compile,fileCok){$scope.contact={},$scope.currentUser=AuthService.isLoggedIn(),$scope.userData=AuthService.getUserDetail(),$scope.userTypeOption=["Renter","Owner","Other"],$scope.contact.user=$scope.userTypeOption[0],$scope.pageSize=15,$scope.currentPage=1,$scope.currentUser&&($scope.profile={fname:$scope.userData.first_name,lname:$scope.userData.last_name,address:$scope.userData.address,suburb:$scope.userData.suburb,state:$scope.userData.state,lstate:$scope.userData.licence_state,email:$scope.userData.email,mobile:$scope.userData.mobile,otpVerfied:$scope.userData.otp_verified},$scope.checkProfile={fname:$scope.userData.first_name,lname:$scope.userData.last_name,address:$scope.userData.address,suburb:$scope.userData.suburb,state:$scope.userData.state,lstate:$scope.userData.licence_state,email:$scope.userData.email,mobile:$scope.userData.mobile,otpVerfied:$scope.userData.otp_verified},0==$scope.userData.postcode?$scope.profile.postcode="":$scope.profile.postcode=$scope.userData.postcode,0==$scope.userData.licence_number?$scope.profile.lnumber="":$scope.profile.lnumber=$scope.userData.licence_number,0==$scope.userData.postcode?$scope.checkProfile.postcode="":$scope.checkProfile.postcode=$scope.userData.postcode,0==$scope.userData.licence_number?$scope.checkProfile.lnumber="":$scope.checkProfile.lnumber=$scope.userData.licence_number),$scope.forgotPass=function(){console.log("gchhkjhkjkj"),$scope.forgotForm.$valid&&($rootScope.showLoading=!0,$http.post("/api/user/forgot_password",{email:$scope.forgotform.email,role:2}).then(function(res){0==res.data.status?($scope.forgotform={},$scope.forgotForm.$setPristine(),$scope.forgotForm.$setUntouched(),$rootScope.showLoading=!1,Notify.showNotification(res.data.error.error_message,"error-class")):($scope.forgotform={},$scope.forgotForm.$setPristine(),$scope.forgotForm.$setUntouched(),$rootScope.showLoading=!1,$("#myModalForgotPass").modal("hide"),Notify.showNotification(res.data.message))},function(err){$scope.forgotform={},$scope.forgotForm.$setPristine(),$scope.forgotForm.$setUntouched(),$rootScope.showLoading=!1,Notify.showNotification(err.data.error.error_message,"error-class")}))},$scope.userLogin=function(){$scope.signinForm.$valid&&AuthService.login($scope.regform.email,$scope.regform.password,2).then(function(res){$("#myModal").modal("hide"),$state.go("profile")})["catch"](function(err){Notify.showNotification(err.message,"error-class")})},$scope.resetPass=function(){$scope.resetForm.$valid&&$http.post("/api/user/reset_password",{token:$stateParams.token,password:$scope.resform.cpassword}).then(function(res){$rootScope.showLoading=!1,Notify.showNotification(res.data.message),$state.go("home")},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error.error_message,"error-class")})},$scope.changePass=function(){$scope.signinpForm.$valid&&($rootScope.showLoading=!0,$http.post("/api/user/change_profile_password",{id:$scope.userData.id,oldpassword:$scope.resform.oldpassword,password:$scope.resform.cpassword}).then(function(res){$rootScope.showLoading=!1,Notify.showNotification(res.data.message)},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error.error_message,"error-class")}))},$scope.profileUpdate=function(){if($scope.profileForm.$valid){$rootScope.showLoading=!0;var up={};up.id=$scope.userData.id,up.fname=$scope.profile.fname,up.lname=$scope.profile.lname,up.address=$scope.profile.address||"",up.suburb=$scope.profile.suburb||"",up.state=$scope.profile.state||"",up.postcode=$scope.profile.postcode||"",up.lstate=$scope.profile.lstate||"",up.lnumber=$scope.profile.lnumber||"",$http.post("/api/user/profile_update",up).then(function(res){$rootScope.showLoading=!1,$scope.userData.first_name=$scope.profile.fname,$scope.userData.last_name=$scope.profile.lname,$scope.userData.address=$scope.profile.address,$scope.userData.suburb=$scope.profile.suburb,$scope.userData.state=$scope.profile.state,$scope.userData.postcode=$scope.profile.postcode,$scope.userData.licence_state=$scope.profile.lstate,$scope.userData.licence_number=$scope.profile.lnumber,Notify.showNotification(res.data.message),$state.go($state.current,{},{reload:!0})},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error,"error-class")})}},$scope.checkDisable=function(){return angular.equals($scope.checkProfile,$scope.profile)},$scope.userLogout=function(){AuthService.userLogout().then(function(){$state.go("home"),$rootScope.currentUser=!1,Notify.showNotification("You have successfully logout")})["catch"](function(){console.log("errorrr")})},$scope.uploadUserImage=function(e){$rootScope.showLoading=!0,file.preview(angular.element(e)[0].files[0]).then(function(res){$scope.userImgP=$sce.trustAsResourceUrl(res.data[0]),$http.post("/api/unlink_file/",{
path:"public/front/images/userpic/",img:$scope.userData.profile_pic}),$http.post("/api/unlink_file/",{path:"public/front/images/userpic/thumb/",img:$scope.userData.profile_pic}),$scope._upload("/api/user/uploadPic",angular.element(e)[0].files[0],$scope.userData.id).success(function(res){$rootScope.showLoading=!1,$localStorage.user.profile_pic=res.data,$scope.width="100%",Notify.showNotification(res.message)},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error,"error-class")})},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.message,"error-class")})},$scope.openForgotPass=function(){$("#myModal").modal("hide"),$("#myModalForgotPass").modal("show")},$scope.openLoginPop=function(){$("#myModal").modal("show"),$("#myModalForgotPass").modal("hide")},$scope.sendContact=function(e){if($scope.contactForm.$valid){$rootScope.showLoading=!0;var ctData={};ctData.email=$scope.contact.email,ctData.name=$scope.contact.name,ctData.phone=$scope.contact.phone,ctData.subject=$scope.contact.subject,ctData.user_type=$scope.contact.user,$scope.contact.message?ctData.message=$scope.contact.message.replace(/"|""|`/gi,"'")||"":ctData.message="",$scope.contact.file?$scope._upload("/api/user/contact_us",$scope.contact.file,ctData).success(function(res){$rootScope.showLoading=!1,Notify.showNotification(res.message),$state.go($state.current,{},{reload:!0})},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error,"error-class")}):$scope._upload("/api/user/contact_us",null,ctData).success(function(res){$rootScope.showLoading=!1,Notify.showNotification(res.message),$state.go($state.current,{},{reload:!0})},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error,"error-class")})}},$scope.getAttacmentFile=function(e){fileCok.preview(angular.element(e)[0].files[0]).then(function(res){$scope.contact.file=angular.element(e)[0].files[0],$scope.fileShowError=!1},function(err){$scope.fileShowError=!0,$scope.fileShowErrorText=err.message})},$scope._upload=function(url,Vfiles,dataT){return Upload.upload({url:url,file:Vfiles,data:dataT})},$scope.index=function(){$scope.activeProfile=!0,$scope.activeOwnerInvoice=!1,$scope.activeRenterInvoice=!1,$scope.activeDispute=!1,$scope.width="80%",$scope.userData.profile_pic&&($scope.width="100%");var ele=angular.element("#element");ele.html(""),loadAsync.template({view:"front/views/user/my_profile.html"}).then(function(res){ele.append($compile(res)($scope))})},$scope.raiseDisputeLoad=function(){$scope.activeProfile=!1,$scope.activeOwnerInvoice=!1,$scope.activeRenterInvoice=!1,$scope.activeDispute=!0;var ele=angular.element("#element");ele.html(""),$http.post("/api/user/get_dispute_id_list",{user_id:$scope.userData.id}).then(function(res){$scope.renterOption=res.data.data,$scope.conditionOption=[{id:1,name:"Previous"},{id:2,name:"Good"},{id:3,name:"Poor"},{id:4,name:"Very Poor"}],loadAsync.template({view:"front/views/user/raise_a_dispute.html"}).then(function(res){ele.append($compile(res)($scope))})})},$scope.raiseDispute=function(){if($scope.disputeForm.$valid){var dsData={};dsData.user_id=$scope.userData.id,dsData.renter_name=$scope.dispute.name.fullname,dsData.renter_email=$scope.dispute.name.email,dsData.trailer_condition=$scope.dispute.condition.name,dsData.discription=$scope.dispute.textarea,$http.post("/api/user/save_dispute_data",dsData).then(function(res){$scope.renterOption=res.data.data,$state.go($state.current,{},{reload:!0})})}},$scope.ownerInvoice=function(){$scope.activeProfile=!1,$scope.activeOwnerInvoice=!0,$scope.activeRenterInvoice=!1,$scope.activeDispute=!1;var ele=angular.element("#element");ele.html(""),$http.post("/api/user/get_invoices_by_user",{user_id:$scope.userData.id,role:2}).then(function(res){$scope.invoiceOwList=res.data.data,loadAsync.template({view:"front/views/user/owner_invoice.html"}).then(function(res){ele.append($compile(res)($scope))})})},$scope.renterInvoice=function(){$scope.activeProfile=!1,$scope.activeOwnerInvoice=!1,$scope.activeRenterInvoice=!0,$scope.activeDispute=!1;var ele=angular.element("#element");ele.html(""),$http.post("/api/user/get_invoices_by_user",{user_id:$scope.userData.id,role:1}).then(function(res){$scope.invoiceReList=res.data.data,loadAsync.template({view:"front/views/user/renter_invoice.html"}).then(function(res){ele.append($compile(res)($scope))})})},$scope.resendOtp=function(){$rootScope.showLoading=!0,$http.post("/api/user/regenerate_otp",{user_id:$scope.userData.id}).then(function(res){console.log(res),0==res.data.status?($rootScope.showLoading=!1,Notify.showNotification(err.data.error.error_message,"error-class")):($rootScope.showLoading=!1,Notify.showNotification(res.data.message))},function(err){$rootScope.showLoading=!1,Notify.showNotification(err.data.error.error_message,"error-class")})}}])}(),myApp.factory("Page",["$http",function($http){}]),myApp.service("Notify",["notify",function(notify){this.showNotification=function(msg,classes){return notify.closeAll(),notify({templateUrl:"/notify.html",message:msg,classes:classes?classes:"",position:"center",duration:5e3}),this}}]).service("file",["$q","Upload",function($q,Upload){this.preview=function(file){var def=$q.defer(),imgURL=[];if(file.type.match("image.*")||file.type.match("video.*")){var URL=window.URL||window.webkitURL;if(void 0!==URL)imgURL.push(URL.createObjectURL(file)),imgURL.push(file.name),URL.revokeObjectURL(file),def.resolve({status:200,message:"OK",data:imgURL,error:{}});else if(window.File&&window.FileReader){var reader=new FileReader;reader.readAsDataURL(file),reader.onloadend=function(){imgURL=reader.result,def.resolve({status:200,message:"OK",data:imgURL,error:{}})}}else def.reject({status:400,message:"File uploader not supported",data:imgURL,error:{}})}else def.reject({status:400,message:"File type not supported",error:{}});return def.promise},this.uploadImg=function(file,path){var def=$q.defer();return Upload.upload({url:"/upload/"+path,file:file}).success(function(res){var namePackage=res.data.file.path.split("/");def.resolve({status:200,message:"OK",data:namePackage.pop(),error:{}})}).error(function(err){def.reject({status:400,message:"Error",data:null,error:err})}),def.promise}}]).service("fileCok",["$q","Upload",function($q,Upload){this.preview=function(file){var def=$q.defer(),imgURL=[];if(file.type.match("jpg.*")||file.type.match("jpeg.*")||file.type.match("png.*")||file.type.match("docx.*")||file.type.match("pdf.*")||file.type.match("document.*")||file.type.match("rtf.*")||file.type.match("plain.*")||file.type.match("msword.*"))if(file.size<5e5){var URL=window.URL||window.webkitURL;if(void 0!==URL)imgURL.push(URL.createObjectURL(file)),imgURL.push(file.name),URL.revokeObjectURL(file),def.resolve({status:200,message:"OK",data:imgURL,error:{}});else if(window.File&&window.FileReader){var reader=new FileReader;reader.readAsDataURL(file),reader.onloadend=function(){imgURL=reader.result,def.resolve({status:200,message:"OK",data:imgURL,error:{}})}}else def.reject({status:400,message:"File uploader not supported",data:imgURL,error:{}})}else def.reject({status:400,message:"File size allowed only : 500kb",data:imgURL,error:{}});else def.reject({status:400,message:"File type allowed only : jpeg, .docx, .rtf, .bmp, .png, .pdf, .doc",error:{}});return def.promise},this.uploadImg=function(file,path){var def=$q.defer();return Upload.upload({url:"/upload/"+path,file:file}).success(function(res){var namePackage=res.data.file.path.split("/");def.resolve({status:200,message:"OK",data:namePackage.pop(),error:{}})}).error(function(err){def.reject({status:400,message:"Error",data:null,error:err})}),def.promise}}]).service("loadAsync",["$q","$http","$templateCache",function($q,$http,$templateCache){this.css=function(url){var res=document.createElement("link");res.href=url,res.rel="stylesheet";var ele=document.getElementsByTagName("head")[0];ele.appendChild(res)},this.js=function(url,cb,defer){defer=defer||$q.defer();var res=document.createElement("script");if(res.type="application/javascript",angular.isArray(url)){var self=this;res.src=url[0],res.onerror=res.onload=function(){url.shift(),url.length?self.js(url,cb,defer):defer.resolve()}}else res.src=url,res.onload=cb||function(){defer.resolve()};return document.body.appendChild(res),defer.promise},this.template=function(params){if(!angular.isUndefined(params)&&!angular.isUndefined(params.view)){if(angular.isUndefined(params.controller))return $http.get(params.view,{cache:$templateCache}).then(function(res){return res.data});var counter=0,resp="",total=Object.keys(params).length,defer=$q.defer();return this.js(params.controller).then(function(){counter++,counter===total&&defer.resolve(resp)}),$http.get(params.view,{cache:$templateCache}).then(function(res){counter++,resp=res.data,counter===total&&defer.resolve(resp)}),defer.promise}console.log("Required arguments missing : view")}}]),myApp.factory("AuthService",["$q","$timeout","$http","$localStorage","$sessionStorage","$window","$rootScope",function($q,$timeout,$http,$localStorage,$sessionStorage,$window,$rootScope){function isLoggedIn(){return $localStorage.user?!0:!1}function getUserDetail(){return $localStorage.user}function adminLoggedIn(){return $localStorage.admin?!0:!1}function getAdminDetail(){return $localStorage.admin}function login(email,password,role){var deferred=$q.defer();return $http.post("/api_user/signin",{email:email,password:password,role:role}).success(function(res,status){200===status&&res.data?(1==res.data.role?($localStorage.admin={},$localStorage.admin=res.data):($localStorage.user={},$localStorage.user=res.data),deferred.resolve(res.data)):(user=!1,deferred.reject())}).error(function(data){user=!1,deferred.reject(data)}),deferred.promise}function userLogout(){var deferred=$q.defer();return $http.get("/api_user/userlogout").success(function(data){delete $localStorage.user,deferred.resolve()}).error(function(data){user=!1,deferred.reject()}),deferred.promise}function adminLogout(){var deferred=$q.defer();return $http.get("/api_user/adminlogout").success(function(data){delete $localStorage.admin,deferred.resolve()}).error(function(data){deferred.reject()}),deferred.promise}function register(data){var deferred=$q.defer();return $http.post("/api_user/signup",{email:data.email,mobile:data.mobile,password:data.password}).success(function(res,status){200===status&&res.data?deferred.resolve(res):deferred.reject()}).error(function(data){deferred.reject(data)}),deferred.promise}var user=null;return{isLoggedIn:isLoggedIn,adminLoggedIn:adminLoggedIn,getUserDetail:getUserDetail,getAdminDetail:getAdminDetail,login:login,userLogout:userLogout,adminLogout:adminLogout,register:register}}]),function(){function dirPaginateDirective($compile,$parse,paginationService){function dirPaginationCompileFn(tElement,tAttrs){var expression=tAttrs.dirPaginate,match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),filterPattern=/\|\s*itemsPerPage\s*:\s*(.*\(\s*\w*\)|([^\)]*?(?=\s+as\s+))|[^\)]*)/;if(null===match[2].match(filterPattern))throw"pagination directive: the 'itemsPerPage' filter must be set.";var itemsPerPageFilterRemoved=match[2].replace(filterPattern,""),collectionGetter=$parse(itemsPerPageFilterRemoved);addNoCompileAttributes(tElement);var rawId=tAttrs.paginationId||DEFAULT_ID;return paginationService.registerInstance(rawId),function(scope,element,attrs){var paginationId=$parse(attrs.paginationId)(scope)||attrs.paginationId||DEFAULT_ID;paginationService.deregisterInstance(rawId),paginationService.registerInstance(paginationId);var repeatExpression=getRepeatExpression(expression,paginationId);addNgRepeatToElement(element,attrs,repeatExpression),removeTemporaryAttributes(element);var compiled=$compile(element),currentPageGetter=makeCurrentPageGetterFn(scope,attrs,paginationId);paginationService.setCurrentPageParser(paginationId,currentPageGetter,scope),"undefined"!=typeof attrs.totalItems?(paginationService.setAsyncModeTrue(paginationId),scope.$watch(function(){return $parse(attrs.totalItems)(scope)},function(result){result>=0&&paginationService.setCollectionLength(paginationId,result)})):(paginationService.setAsyncModeFalse(paginationId),scope.$watchCollection(function(){return collectionGetter(scope)},function(collection){if(collection){var collectionLength=collection instanceof Array?collection.length:Object.keys(collection).length;paginationService.setCollectionLength(paginationId,collectionLength)}})),compiled(scope),scope.$on("$destroy",function(){paginationService.deregisterInstance(paginationId)})}}function getRepeatExpression(expression,paginationId){var repeatExpression,idDefinedInFilter=!!expression.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);return repeatExpression=paginationId===DEFAULT_ID||idDefinedInFilter?expression:expression.replace(/(\|\s*itemsPerPage\s*:\s*[^|\s]*)/,"$1 : '"+paginationId+"'")}function addNgRepeatToElement(element,attrs,repeatExpression){element[0].hasAttribute("dir-paginate-start")||element[0].hasAttribute("data-dir-paginate-start")?(attrs.$set("ngRepeatStart",repeatExpression),element.eq(element.length-1).attr("ng-repeat-end",!0)):attrs.$set("ngRepeat",repeatExpression)}function addNoCompileAttributes(tElement){angular.forEach(tElement,function(el){1===el.nodeType&&angular.element(el).attr("dir-paginate-no-compile",!0)})}function removeTemporaryAttributes(element){angular.forEach(element,function(el){1===el.nodeType&&angular.element(el).removeAttr("dir-paginate-no-compile")}),element.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate"),element.eq(element.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}function makeCurrentPageGetterFn(scope,attrs,paginationId){var currentPageGetter;if(attrs.currentPage)currentPageGetter=$parse(attrs.currentPage);else{var defaultCurrentPage=(paginationId+"__currentPage").replace(/\W/g,"_");scope[defaultCurrentPage]=1,currentPageGetter=$parse(defaultCurrentPage)}return currentPageGetter}return{terminal:!0,multiElement:!0,priority:100,compile:dirPaginationCompileFn}}function noCompileDirective(){return{priority:5e3,terminal:!0}}function dirPaginationControlsTemplateInstaller($templateCache){$templateCache.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' || ( ! autoHide && pages.length === 1 ) }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}function dirPaginationControlsDirective(paginationService,paginationTemplate){function dirPaginationControlsLinkFn(scope,element,attrs){function goToPage(num){if(paginationService.isRegistered(paginationId)&&isValidPageNumber(num)){var oldPageNumber=scope.pagination.current;scope.pages=generatePagesArray(num,paginationService.getCollectionLength(paginationId),paginationService.getItemsPerPage(paginationId),paginationRange),scope.pagination.current=num,updateRangeValues(),scope.onPageChange&&scope.onPageChange({newPageNumber:num,oldPageNumber:oldPageNumber})}}function generatePagination(){if(paginationService.isRegistered(paginationId)){var page=parseInt(paginationService.getCurrentPage(paginationId))||1;scope.pages=generatePagesArray(page,paginationService.getCollectionLength(paginationId),paginationService.getItemsPerPage(paginationId),paginationRange),scope.pagination.current=page,scope.pagination.last=scope.pages[scope.pages.length-1],scope.pagination.last<scope.pagination.current?scope.setCurrent(scope.pagination.last):updateRangeValues()}}function updateRangeValues(){if(paginationService.isRegistered(paginationId)){var currentPage=paginationService.getCurrentPage(paginationId),itemsPerPage=paginationService.getItemsPerPage(paginationId),totalItems=paginationService.getCollectionLength(paginationId);scope.range.lower=(currentPage-1)*itemsPerPage+1,scope.range.upper=Math.min(currentPage*itemsPerPage,totalItems),scope.range.total=totalItems}}function isValidPageNumber(num){return numberRegex.test(num)&&num>0&&num<=scope.pagination.last}var rawId=attrs.paginationId||DEFAULT_ID,paginationId=scope.paginationId||attrs.paginationId||DEFAULT_ID;if(!paginationService.isRegistered(paginationId)&&!paginationService.isRegistered(rawId)){var idMessage=paginationId!==DEFAULT_ID?" (id: "+paginationId+") ":" ";window.console&&console.warn("Pagination directive: the pagination controls"+idMessage+"cannot be used without the corresponding pagination directive, which was not found at link time.")}scope.maxSize||(scope.maxSize=9),scope.autoHide=void 0===scope.autoHide?!0:scope.autoHide,scope.directionLinks=angular.isDefined(attrs.directionLinks)?scope.$parent.$eval(attrs.directionLinks):!0,scope.boundaryLinks=angular.isDefined(attrs.boundaryLinks)?scope.$parent.$eval(attrs.boundaryLinks):!1;var paginationRange=Math.max(scope.maxSize,5);scope.pages=[],scope.pagination={last:1,current:1},scope.range={lower:1,upper:1,total:1},scope.$watch("maxSize",function(val){val&&(paginationRange=Math.max(scope.maxSize,5),generatePagination())}),scope.$watch(function(){return paginationService.isRegistered(paginationId)?(paginationService.getCollectionLength(paginationId)+1)*paginationService.getItemsPerPage(paginationId):void 0},function(length){length>0&&generatePagination()}),scope.$watch(function(){return paginationService.isRegistered(paginationId)?paginationService.getItemsPerPage(paginationId):void 0},function(current,previous){current!=previous&&"undefined"!=typeof previous&&goToPage(scope.pagination.current)}),scope.$watch(function(){return paginationService.isRegistered(paginationId)?paginationService.getCurrentPage(paginationId):void 0},function(currentPage,previousPage){currentPage!=previousPage&&goToPage(currentPage)}),scope.setCurrent=function(num){paginationService.isRegistered(paginationId)&&isValidPageNumber(num)&&(num=parseInt(num,10),paginationService.setCurrentPage(paginationId,num))},scope.tracker=function(id,index){return id+"_"+index}}function generatePagesArray(currentPage,collectionLength,rowsPerPage,paginationRange){var position,pages=[],totalPages=Math.ceil(collectionLength/rowsPerPage),halfWay=Math.ceil(paginationRange/2);position=halfWay>=currentPage?"start":currentPage>totalPages-halfWay?"end":"middle";for(var ellipsesNeeded=totalPages>paginationRange,i=1;totalPages>=i&&paginationRange>=i;){var pageNumber=calculatePageNumber(i,currentPage,paginationRange,totalPages),openingEllipsesNeeded=2===i&&("middle"===position||"end"===position),closingEllipsesNeeded=i===paginationRange-1&&("middle"===position||"start"===position);ellipsesNeeded&&(openingEllipsesNeeded||closingEllipsesNeeded)?pages.push("..."):pages.push(pageNumber),i++}return pages}function calculatePageNumber(i,currentPage,paginationRange,totalPages){var halfWay=Math.ceil(paginationRange/2);return i===paginationRange?totalPages:1===i?i:totalPages>paginationRange?currentPage>totalPages-halfWay?totalPages-paginationRange+i:currentPage>halfWay?currentPage-halfWay+i:i:i}var numberRegex=/^\d+$/,DDO={restrict:"AE",scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?",autoHide:"=?"},link:dirPaginationControlsLinkFn},templateString=paginationTemplate.getString();return void 0!==templateString?DDO.template=templateString:DDO.templateUrl=function(elem,attrs){return attrs.templateUrl||paginationTemplate.getPath()},DDO}function itemsPerPageFilter(paginationService){return function(collection,itemsPerPage,paginationId){if("undefined"==typeof paginationId&&(paginationId=DEFAULT_ID),!paginationService.isRegistered(paginationId))throw"pagination directive: the itemsPerPage id argument (id: "+paginationId+") does not match a registered pagination-id.";var end,start;if(angular.isObject(collection)){if(itemsPerPage=parseInt(itemsPerPage)||9999999999,start=paginationService.isAsyncMode(paginationId)?0:(paginationService.getCurrentPage(paginationId)-1)*itemsPerPage,end=start+itemsPerPage,paginationService.setItemsPerPage(paginationId,itemsPerPage),collection instanceof Array)return collection.slice(start,end);var slicedObject={};return angular.forEach(keys(collection).slice(start,end),function(key){slicedObject[key]=collection[key]}),slicedObject}return collection}}function keys(obj){if(Object.keys)return Object.keys(obj);var objKeys=[];for(var i in obj)obj.hasOwnProperty(i)&&objKeys.push(i);return objKeys}function paginationService(){var lastRegisteredInstance,instances={};this.registerInstance=function(instanceId){"undefined"==typeof instances[instanceId]&&(instances[instanceId]={asyncMode:!1},lastRegisteredInstance=instanceId)},this.deregisterInstance=function(instanceId){delete instances[instanceId]},this.isRegistered=function(instanceId){return"undefined"!=typeof instances[instanceId]},this.getLastInstanceId=function(){return lastRegisteredInstance},this.setCurrentPageParser=function(instanceId,val,scope){instances[instanceId].currentPageParser=val,instances[instanceId].context=scope},this.setCurrentPage=function(instanceId,val){instances[instanceId].currentPageParser.assign(instances[instanceId].context,val)},this.getCurrentPage=function(instanceId){var parser=instances[instanceId].currentPageParser;return parser?parser(instances[instanceId].context):1},this.setItemsPerPage=function(instanceId,val){instances[instanceId].itemsPerPage=val},this.getItemsPerPage=function(instanceId){return instances[instanceId].itemsPerPage},this.setCollectionLength=function(instanceId,val){instances[instanceId].collectionLength=val},this.getCollectionLength=function(instanceId){return instances[instanceId].collectionLength},this.setAsyncModeTrue=function(instanceId){instances[instanceId].asyncMode=!0},this.setAsyncModeFalse=function(instanceId){instances[instanceId].asyncMode=!1},this.isAsyncMode=function(instanceId){return instances[instanceId].asyncMode}}function paginationTemplateProvider(){var templateString,templatePath="angularUtils.directives.dirPagination.template";this.setPath=function(path){templatePath=path},this.setString=function(str){templateString=str},this.$get=function(){return{getPath:function(){return templatePath},getString:function(){return templateString}}}}var moduleName="angularUtils.directives.dirPagination",DEFAULT_ID="__default";angular.module(moduleName,[]).directive("dirPaginate",["$compile","$parse","paginationService",dirPaginateDirective]).directive("dirPaginateNoCompile",noCompileDirective).directive("dirPaginationControls",["paginationService","paginationTemplate",dirPaginationControlsDirective]).filter("itemsPerPage",["paginationService",itemsPerPageFilter]).service("paginationService",paginationService).provider("paginationTemplate",paginationTemplateProvider).run(["$templateCache",dirPaginationControlsTemplateInstaller])}(),function(window,document){angular.module("gm.config",[]).value("gm.config",{debug:!0,placess:{autocomplete:{}}}).run(["$window",function($window){if(angular.isUndefined($window.google)||angular.isUndefined($window.google.maps))throw new Error("Google Maps API not available, please make sure the Google Maps library is loaded before the AngularJS Google Maps library is loaded")}]),angular.module("gm.places.directives",[]),angular.module("gm.places",["gm.places.directives"]).run(["$window",function($window){if(angular.isUndefined($window.google)||angular.isUndefined($window.google.maps)||angular.isUndefined($window.google.maps.places)||angular.isUndefined($window.google.maps.places.Autocomplete))throw new Error("Google Maps API not available, please make sure the Google Maps library is loaded before the AngularJS Google Maps library is loaded")}]),angular.module("gm.directives",[]),angular.module("gm.filters",[]),angular.module("gm.services",[]),angular.module("gm",["gm.config","gm.directives","gm.filters","gm.services","gm.places"]),angular.module("gm.services").factory("logger",["$log","$window",function($log,$window){var service={};return angular.forEach(["log","info","warn","error"],function(method){service[method]=function(){return $log[method](arguments)}}),service.dir=function(obj,title){$window.console&&(angular.isDefined(title)&&$log.info(title+":"),$window.console.dir(obj))},service}]),angular.module("gm.places").directive("gmPlacesAutocomplete",["$rootScope","gm.config","logger",function($rootScope,gmConfig,logger){var configOptions=gmConfig.places&&gmConfig.places.autocomplete||{};return{restrict:"AEC",require:["gmPlacesAutocomplete","?ngModel"],controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){this._options=angular.extend({},configOptions,$scope.$eval($attrs.gmOptions)),this._element=$element[0],this._api=void 0,Object.defineProperties(this,{element:{get:function(){return this._element},configurable:!1},api:{get:function(){return this._api},configurable:!1}});try{this._api=new google.maps.places.Autocomplete(this._element,this._options)}catch(err){gmConfig.debug&&logger.log("Could not instantiate gmPlacesAutocomplete directive: "+err.message)}}],link:function(scope,iElement,iAttrs,controllers){var gmPlacesAutocompleteController=controllers[0],ngModelController=controllers[1];ngModelController&&ngModelController.$setViewValue(gmPlacesAutocompleteController.api),google.maps.event.addListener(gmPlacesAutocompleteController.api,"place_changed",function(scope,iElement,iAttrs,gmPlacesAutocompleteController,ngModelController,$rootScope){return function(){ngModelController&&ngModelController.$setViewValue(gmPlacesAutocompleteController.api),$rootScope.$broadcast("gmPlacesAutocomplete::placeChanged",gmPlacesAutocompleteController)}}(scope,iElement,iAttrs,gmPlacesAutocompleteController,ngModelController,$rootScope))}}}])}(window,document);